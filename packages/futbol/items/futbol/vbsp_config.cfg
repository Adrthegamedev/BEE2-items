"Conditions"
	{
	"Condition"
		{
		"instance" "<ITEM_BEE2_FUTBOL>"
		
		"Result"
			{
			// Create the whole panel.
			"CreatePanel"
				{
				"Normal" "0 0 1"
				"Pos1" "-112 16 0"
				"Pos2" "48 -16 0"
				"Type" "Normal"
				"Offset" "0 0 8"
				"thickness" "8"
				"bevel" "0"
				"seal"  "1"
				"keys" 
					{ 
					"classname" "func_detail"
					}
				}
			// If no tiles are present behind the side part, make it not seal.
			"Condition"
				{
				"PosIsSolid"
					{
					"Pos1" "-112 16 0"
					"Pos2" "-80 -16 0"
					"Type" "None"
					}
				"Result"
					{
					"SetPanelOptions"
						{
						"Normal" "0 0 1"
						"Pos1" "-112 16 0"
						"Pos2" "-80 -16 0"

						"seal"  "0"
						}
					}
				}
			// Lastly set the whole futbol area to black, so you can't portal behind it.
			// This will also fully set the tiles for the offset bit if needed.
			"SetTile"
				{
				"Offset" "-112 16 0"
				"Force" "1"
				"Tile" "BBBBBB"
				"Tile" "BBBBBB"
				}

			// Add the filter we used into the globals area.
			"AddGlobal" "instances/BEE2/clean/items/futbol/filter_futbol.vmf"
			}

		// Now pick the instances so we have optimum logic.

		"Condition"
			{
			// First check to see if it's possible to spawn a futbol - if we have inputs or autospawn.
			"OR"
				{
				"instvar" "$connectioncount > 0"
				"instvar" "$disable_autodrop = 1"
				}
			// If we do have either, add the futbol itself.
			"Result"
				{
				"AddOverlay" "<ITEM_BEE2_FUTBOL:bee2_futbol>"
				}
			// If set to respawn, add those outputs.
			"Condition"
				{
				"instvar" "$disable_autorespawn = 1"
				"Result"
					{
					"AddOverlay" "instances/bee2/clean/items/futbol/respawn.vmf"
					}
				}
			"Condition"
				{
				// If we have input or respawn, add the spawner.
				// That then puts the futbol into a template.
				"OR"
					{
					"instvar" "$connectioncount > 0"
					"instvar" "$disable_autorespawn = 1"
					}
				"Result"
					{
					"AddOverlay" "<ITEM_BEE2_FUTBOL:bee2_spawner>"
					}
				// Otherwise, the futbol is only goint to spawn at the start.
				// So we can just leave it directly in the map.
				}
			// Otherwise, it's just a detector and doesn't spawn anything.
			}
		}
	}
