"Conditions"
	{
	"Condition"
		{
		"instance"	"[spEntryCorr]"
		"Condition"
			{
			"stylevar" "P1_DOORLESS_ENTRY"
			"Result"
				{
				"AddOverlay" "<ITEM_ENTRY_DOOR:bee2_entry_nodoor>"
				}
			"Else"
				{
				"AddOverlay" "<ITEM_ENTRY_DOOR:bee2_entry_door>"
				// add the fizzler, except in Tag
				"Condition"
					{
					"NOT"
						{
						"game"	"aptag"
						}
					"Result"
						{
						"Switch"
							{
							"flag" "instance"
							"<ITEM_ENTRY_DOOR:0>"
								{
								"AddOverlay" "instances/bee2/p1/elevator_sp/entry_fizz_corr1.vmf"
								}
							"<ITEM_ENTRY_DOOR:1>"
								{
								"AddOverlay" "instances/bee2/p1/elevator_sp/entry_fizz_corr1.vmf"
								}
							"<ITEM_ENTRY_DOOR:2>"
								{
								"AddOverlay" "instances/bee2/p1/elevator_sp/entry_fizz_corr1.vmf"
								}
							"<ITEM_ENTRY_DOOR:3>"
								{
								"AddOverlay" "instances/bee2/p1/elevator_sp/entry_fizz_corr1.vmf"
								}
							"<ITEM_ENTRY_DOOR:4>"
								{
								"AddOverlay" "instances/bee2/p1/elevator_sp/entry_fizz_corr5.vmf"
								}
							"<ITEM_ENTRY_DOOR:5>"
								{
								"AddOverlay" "instances/bee2/p1/elevator_sp/entry_fizz_corr5.vmf"
								}
							"<ITEM_ENTRY_DOOR:6>"
								{
								"AddOverlay" "instances/bee2/p1/elevator_sp/entry_fizz_corr5.vmf"
								}
							}
						}
					}
				}
			}
		}
	"Condition"
		{
		"instance" "[door_frame_sp]"
		// Only apply this to the entry frames, the exit ones are done in that item.
		"instvar" "$door_type = entry"
		"Result"
			{
			"ChangeInstance" ""
			}
		"Condition"
			{
			"stylevar" "P1_DOORLESS_ENTRY"
			"Result"
				{
				// just remove the tiles
				"SetTiles"
					{
					"Tile" "...."
					"Tile" "...."
					"Tile" "...."
					"Tile" "...."
					}
				}
			"Else"
				{
				"TemplateBrush" "BEE2_EXIT_DOOR_FRAME_PORTAL1"
				}
			}
		"Condition"
			{
			"StyleVar" "DoorCameras"
			// Basic check that this space is free - check all four blocks, and that it's inside the map.
			"BlockType"
				{
				"Offset" "1 0 1"
				"Type"   "AIR OCCUPIED GOO"
				}
			"PosIsSolid"
				{
				"Pos" "112 -16 0"
				"Type" "tile"
				}
			"PosIsSolid"
				{
				"Pos" "144 -16 0"
				"Type" "tile"
				}
			"PosIsSolid"
				{
				"Pos" "112 -48 0"
				"Type" "tile"
				}
			"PosIsSolid"
				{
				"Pos" "144 -48 0"
				"Type" "tile"
				}
			"Result"
				{
				"addOverlay"
					{
					"file"	 "instances/BEE2/p1/camera.vmf"
					"Offset" "128 -32 -64"
					}
				"PrecacheModel" "bee2/props_p1/security_camera"
				}
			}
		}
	"Condition"
		{
		"Priority"  "10"
		"instance"  "instances/BEE2/p1/elevator_sp/entrance_corridor_2.vmf"
		"Result"
			{
			"Random"
				{
				"weights"	"10, 9, 1"
				
				"AddOverlay"	"instances/bee2/p1/elevator_sp/entrance_corridor_2/normal.vmf"
				"AddOverlay"	"instances/bee2/p1/elevator_sp/entrance_corridor_2/panels.vmf"
				"Group"
					{
					// Very rarely, a Rattmann den will appear, connected with a worldportal
					"AddOverlay"	"instances/bee2/p1/elevator_sp/entrance_corridor_2/portal.vmf"
					"addGlobal"
						{
						"Position"  "-4096 2048 0"
						"File"      "instances/bee2/p1/elevator_sp/entrance_corridor_2/ratman_den.vmf"
						"Name"      "entrance_den"
						}
					"GlobalInput"
						{
						"Name"		"@relay_spawn_on_entrance"
						"Target"	"@ratman_portal*"
						"Input"		"Close"
						"Delay"		"0.5"
						}
					"GlobalInput"
						{
						"Name"		"@relay_spawn_on_entrance"
						"Target"	"@stop_ratman_vactube"
						"Input"		"Trigger"
						"Delay"		"0.5"
						}
					}
				}
			}
		}
	}
