"Conditions"
	{
	"Condition"
		{
		"Priority" "-300"
		"instance"  "<ITEM_BUTTON_FLOOR:btn_weighted>"
		"Result"
			{
			"ChangeIOType"
				{
				"out_activate"   "instance:button;OnPressed"
				"out_deactivate" "instance:button;OnUnpressed"
				}
			}
		}
	
	"Condition"
		{
		"Priority"  "5"
		"instance"  "<ITEM_BUTTON_FLOOR:weighted_white>"			
		// If balls exist in the map, add a clip to the button so they don't roll off.
		// This maintains the ability to place them on buttons.
		"Orientation" "Floor"
		"Has" "CubeSphereShaped"
		"Result"
			{
			"CubeFilter"
				{
				"ResultVar" "$ball_filter"
				"Cube"      "<sphere>"
				}
			"addOverlay"
				{
				"File"      "instances/BEE2/50s/items/button/ball_clip.vmf"
				}
			"RemoveFixup" "$ball_filter"
			}
		}

	"Condition"
		{
		"Priority" "100"
		// Add the base template. We have two different styles for the textures,
		// which we want to swap if it's more white than black.
		"instance"  "<ITEM_BUTTON_FLOOR>"
		"Condition"
			{
			"PosIsSolid"
				{
				"Pos1" "-48 -48 0"
				"Pos2" "48 48 0"
				"Type" "white"
				"SetVar" "$visgroup"
				}
			"Result"
				{
				"SetInstVar" "$side_mat wood/underground_woodwall002a"
				}
			"Else"
				{
				"SetInstVar" "$side_mat wood/underground_plywood_02"
				}
			}

		"Result"
			{
			"TemplateBrush"
				{
				"ID" "BEE2_OLDAP_FLOOR_BUTTON_RECESS:$visgroup"
				"Replace"
					{
					"wood/underground_plywood_02" "$side_mat"
					}
				}
			}
		}
	}
