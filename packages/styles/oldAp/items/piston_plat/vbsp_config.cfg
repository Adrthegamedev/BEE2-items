"Replacements"
	{
	"%STATIC_INST%" "instances/BEE2/50s/items/pist_plat/static"
	"%GRATE_INST%"  "instances/BEE2/50s/items/pist_plat/grate.vmf"
	}
"Conditions"
	{
	"Condition"
		{
		"instance"	"<ITEM_PISTON_PLATFORM>"
		"Result"
			{
			"has"
				{
				"pistonPlatform"	"1"
				"piston"			"1"
				"panel"				"1"
				}
			"PistonPlatform"
				{
				"template"     "BEE2_PISTON_PLATFORM_RETRO"
				
				"static_1"     "instances/BEE2/50s/items/pist_plat/pist_static_1.vmf"
				"static_2"     "instances/BEE2/50s/items/pist_plat/pist_static_2.vmf"
				"static_3"     "instances/BEE2/50s/items/pist_plat/pist_static_3.vmf"
				
				"dynamic_1"    "instances/BEE2/50s/items/pist_plat/pist_dynamic_1.vmf"
				"dynamic_2"    "instances/BEE2/50s/items/pist_plat/pist_dynamic_2.vmf"
				"dynamic_3"    "instances/BEE2/50s/items/pist_plat/pist_dynamic_3.vmf"
				"dynamic_4"    "instances/BEE2/50s/items/pist_plat/pist_dynamic_4.vmf"
				
				"fullstatic_0" "%STATIC_INST%_0.vmf"
				"fullstatic_1" "%STATIC_INST%_1.vmf"
				"fullstatic_2" "%STATIC_INST%_2.vmf"
				"fullstatic_3" "%STATIC_INST%_3.vmf"
				"fullstatic_4" "%STATIC_INST%_4.vmf"
				
				"snd_loop"   "World.a3CrazyBoxLiftTravel"
				"snd_stop"   "World.a3CrazyBoxLiftArrive"
				"source_ent" "platform"
				"auto_var"   "$disable_autodrop"
				}
			}
		// Static platforms don't use any of the embed space.
		"Condition"
			{
			"instvar" "$bottom_level = $top_level"
			"Result"
				{
				"ChangeInstance" ""
				"PackFile"       "models/BEE2/props_underground/gantry_128.mdl"
				}
			"Else"
				{
				// Decade-specific addons.
				"AddOverlay" "%GRATE_INST%"
				}
			}
		}
	"Condition"
		{
		"instance" "instances/BEE2/50s/items/pist_plat/pist_dynamic_4.vmf"
		"Result"
			{
			"Pack"  "PACK_RETRO_PIST_PLAT"
			}
		"Condition"
			{
			"instvar" "$disable_autodrop 1"
			"Condition"
				{
				"instvar" "$connectioncount > 0"
				"Result"
					{
					// Connections and auto trig
					"AddOverlay" "instances/BEE2/clean/items/pist_plat/logic_both.vmf"
					}
				"Else"
					{
					// Auto trig only
					"AddOverlay" "instances/BEE2/clean/items/pist_plat/logic_trig.vmf"
					}
				}
			"Else"
				{
				// IO only.
				"AddOverlay" "instances/BEE2/clean/items/pist_plat/logic_manual.vmf"
				}
			}
		}
	}
