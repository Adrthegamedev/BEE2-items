"Replacements"
	{
	// Not actual variables, just the unique filenames for our parts.
	"%LEFT%" "instances/bee2/logic/lautaro/reclined_fizzler_left.vmf"
	"%MID%" "instances/bee2/logic/lautaro/reclined_fizzler_mid.vmf"
	"%RIGHT%" "instances/bee2/logic/lautaro/reclined_fizzler_right.vmf"
	}

"Conditions" 
	{
	"Condition"
		{
		"Priority" "-300"
		"instance" "<ITEM_LAUTARO_RECLINED_FIZZLER>"
		"Result"
			{
			"Has" "Fizzler"
			"SetInstVar" "$color white"
			}
		// $cube_type defines the height:
		// 0 = 1-high
		// 1 = 2-high
		// 2 = 3-high
		// 3 = 4-high
		// 4 = 5-high

		// Depending on the cube type, run the special reshape
		// command with the emitter positions, then add segment
		// instances at each location.
		"Switch"
			{
			"Flag" "instvar"
			"$cube_type = 0"
				{
				"ReshapeFizzler"
					{
					"Up_axis" "1 0 0"
					"Segment" "0 -64 -48;0 64 -48"
					}
				"AddOverlay"
					{
					"File" "%LEFT%"
					"Offset" "0 0 0"
					}
				"AddOverlay"
					{
					"File" "%RIGHT%"
					"Offset" "0 0 0"
					}
				}
			"$cube_type = 1"
				{
				"ReshapeFizzler"
					{
					"Up_axis" "1 0 0"
					"Segment" "0 -192 -48;0 64 -48"
					}
				"AddOverlay"
					{
					"File" "%LEFT%"
					"Offset" "0 -128 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 -128 0"
					}
				"AddOverlay"
					{
					"File" "%RIGHT%"
					"Offset" "0 0 0"
					}
				}
			"$cube_type = 2"
				{
				"ReshapeFizzler"
					{
					"Up_axis" "1 0 0"
					"Segment" "0 -192 -48;0 192 -48"
					}
				"AddOverlay"
					{
					"File" "%LEFT%"
					"Offset" "0 -128 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 -128 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 128 0"
					}
				"AddOverlay"
					{
					"File" "%RIGHT%"
					"Offset" "0 128 0"
					}
				}
			"$cube_type = 3"
				{
				"ReshapeFizzler"
					{
					"Up_axis" "1 0 0"
					"Segment" "0 -320 -48;0 192 -48"
					}
				"AddOverlay"
					{
					"File" "%LEFT%"
					"Offset" "0 -256 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 -256 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 -128 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 128 0"
					}
				"AddOverlay"
					{
					"File" "%RIGHT%"
					"Offset" "0 128 0"
					}
				}
			"$cube_type = 4"
				{
				"ReshapeFizzler"
					{
					"Up_axis" "1 0 0"
					"Segment" "0 -320 -48;0 320 -48"
					}
				"AddOverlay"
					{
					"File" "%LEFT%"
					"Offset" "0 -256 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 -256 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 -128 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 128 0"
					}
				"AddOverlay"
					{
					"File" "%MID%"
					"Offset" "0 256 0"
					}
				"AddOverlay"
					{
					"File" "%RIGHT%"
					"Offset" "0 256 0"
					}
				}
			}
		"Result"
			{
			"ChangeInstance" ""
			}
		}
	
	"Condition"
		{
		"instance" "%MID%"
		"Condition"
			{
			"PosIsSolid"
				{
				"Pos1" "-48 -48 0"
				"Pos2" "48 48 0"
				"Type" "None"
				"Mode" "or"
				}
			"Result"
				{
				"TemplateBrush"	
					{
					"ID" "LAUTARO_RECLINED_WALL_PILLAR_CLEAN_OVER:surface"
					"ColorVar" "$color"	
					}
				}
			}
		"Result"
			{
			"ChangeInstance" ""
			}
		}
	"Condition"
		{
		"instance" "%LEFT%"
		"Condition"
			{
			"PosIsSolid"
				{
				"Pos1" "-48 -80 0"
				"Pos2" "48 -80 0"
				"Type" "None"
				"Mode" "or"
				}
			"Result"
				{
				"TemplateBrush"	
					{
					"ID" "LAUTARO_RECLINED_WALL_PILLAR_CLEAN_OVER:left"
					"ColorVar" "$color"	
					}
				}
			}
		"Condition"
			{
			"PosIsSolid"
				{
				"Pos1" "-48 -64 16"
				"Pos2" "48 -64 16"
				"Dir" "0 1 0"
				"Type" "None"
				"Mode" "or"
				}
			"Result"
				{
				"TemplateBrush"	
					{
					"ID" "LAUTARO_RECLINED_WALL_PILLAR_CLEAN_OVER:top_left"
					"ColorVar" "$color"	
					}
				}
			}
		"Result"
			{
			"ChangeInstance" ""
			}
		}
	"Condition"
		{
		"instance" "%RIGHT%"
		"Condition"
			{
			"PosIsSolid"
				{
				"Pos1" "-48 80 0"
				"Pos2" "48 80 0"
				"Type" "None"
				"Mode" "or"
				}
			"Result"
				{
				"TemplateBrush"	
					{
					"ID" "LAUTARO_RECLINED_WALL_PILLAR_CLEAN_OVER:right"
					"ColorVar" "$color"	
					}
				}
			}
		"Condition"
			{
			"PosIsSolid"
				{
				"Pos1" "-48 64 16"
				"Pos2" "48 64 16"
				"Dir" "0 -1 0"
				"Type" "None"
				"Mode" "or"
				}
			"Result"
				{
				"TemplateBrush"	
					{
					"ID" "LAUTARO_RECLINED_WALL_PILLAR_CLEAN_OVER:top_right"
					"ColorVar" "$color"	
					}
				}
			}
		"Result"
			{
			"ChangeInstance" ""
			}
		}
	}	
