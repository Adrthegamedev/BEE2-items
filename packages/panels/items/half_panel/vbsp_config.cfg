"Replacements"
	{
	"%TEMP%" "CLEAN"
	}

"Conditions"
	{
	"Condition"
		{
		"Priority" "-1000"
		"instance" "<ITEM_TSPEN_PANEL_HALF_STATIC>"
		// First, unpack the animation to our actual booleans.
		// Do this very early, before any other items.
		"Switch"
			{
			"Flag" "instvar"
			"$animation ramp_90_deg_open"
				{
				"SetInstVar" "$direction out"
				"SetTiles"
					{
					"Tiles" "bb"
					"Tiles" "bb"
					"Tiles" "bb"
					"Tiles" "bb"
					}
				}
			"$animation ramp_60_deg_open"
				{
				"SetInstVar" "$direction out"
				"SetTiles"
					{
					"Tiles" "ww"
					"Tiles" "ww"
					"Tiles" "ww"
					"Tiles" "ww"
					}
				}
			"$animation ramp_45_deg_open"
				{
				"SetInstVar" "$direction in"
				"SetTiles"
					{
					"Tiles" "bb"
					"Tiles" "bb"
					"Tiles" "bb"
					"Tiles" "bb"
					}
				}
			"$animation ramp_30_deg_open"
				{
				"SetInstVar" "$direction in"
				"SetTiles"
					{
					"Tiles" "ww"
					"Tiles" "ww"
					"Tiles" "ww"
					"Tiles" "ww"
					}
				}
			}
		}
	// Then, actually generate the panels after other stuff has their chance.
	"Condition"
		{
		"Priority" "300"
		"instance" "<ITEM_TSPEN_PANEL_HALF_STATIC>"
		"Condition"
			{
			"InstVar" "$connectioncount > 0"
			"Result"
				{
				// It's dynamic, so generate that panel.
				"CreatePanel"
					{
					"Pos1" "-48 -48 0"
					"Pos2" "-16 48 0"
					"Type" "normal"
					"Bevel" "1"
					"Thickness" "2"
					"Keys"
						{
						"classname" "func_brush"
						"solidbsp" "1"
						"origin" "-32 0 -64"
						"parent_attachment_point" "panel_attach"
						}
					"LocalKeys"
						{
						"parentname" "arm"
						}
					}
				}
			"Condition" // Dynamic
				{
				"InstVar" "$direction out"
				"Result"
					{
					"Suffix" "dyn_out"
					}
				"Else"
					{
					"Suffix" "dyn_in"
					}
				}
			// Otherwise, static.
			// First use a template to transfer the tiles to the side.
			// Then make that into a panel.
			"ElseCondition"
				{
				"InstVar" "$direction out"
				"Result"
					{
					"TemplateBrush" "BEE2_HALF_PANEL_TRANSFER:out"
					"CreatePanel"
						{
						"Normal" "-1 0 0"
						"Pos1" "-64 -48 16"
						"Pos2" "-64 48 48"
						"Type" "normal"
						"Bevel" "0"
						"Thickness" "2"
						"Keys"
							{
							"classname" "func_detail"
							}
						}
					"Suffix" "static_out"
					}
				"Else"
					{
					"TemplateBrush" "BEE2_HALF_PANEL_TRANSFER:in"
					"CreatePanel"
						{
						"Normal" "1 0 0"
						"Pos1" "0 -48 16"
						"Pos2" "0 48 48"
						"Type" "normal"
						"Bevel" "0"
						"Thickness" "2"
						"Keys"
							{
							"classname" "func_detail"
							}
						}
					"Suffix" "static_in"
					}
				}
			}
		}
	}
